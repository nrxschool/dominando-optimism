# Aula 4

Pessoal, na aula anterior a gente explorou algumas ferramentas extras que a própria Optimism menciona na sua seção de documentação. E agora a gente vai trabalhar com um pouquinho com o que seria uma interação com os contratos inteligentes envolvendo o Hardhat. Então a gente vai criar, a gente vai fazer o Mint, a gente faz o deploy de um contrato inteligente e, posteriormente, de fazer um mint desse contrato utilizando as tasks do hardhat.

Então vamos aqui pra tela. Bom pessoal, então eu vou fazer uma pequena modificação aqui, tá? E eu vou adicionar uma função de mint dentro desse contrato inteligente e eu posso fazer o seguinte eu já estou herdando  aqui, eu vou colocar essa função de mente aqui tá OnlyOwner, né? Só quem fez o deploy, um smart contract pode e pode chamar essa função.

E aí eu vou colocar aqui. Não, não é bom assim dessa forma, tá? E ele tá, ele tá, tá faltando alguma coisa que a. Bom, parece que algum problema envolvendo esse ownnable. Se eu tirar esse aqui, isso aqui ele funciona. É assim que a gente pode fazer. Vou botar um require aqui e tá aí eu vou colocar, eu vou colocar o seguinte, eu vou deixar, eu vou criar essa variável owner = msg.sender e vou colocar dentro, eu vou, eu vou criar essa função address public owner tá, e vou igualar o owner que certo.

E aí eu coloco um require  logo de baixo do public. Dessa forma, vale dizer que se se o message sender tá, ou seja, quem tá chamando essa função, quem está chamando a função necessariamente precisa ser o owner. E quem é o owner? É o msg.sender que fez o deploy do contrato. Ele é gente, se não for, ele vai ter um revert com esse aqui, ok?

Bom, nada, nada mudou. Eu vou só renomear isso aqui é deixar simpleToken que nada mudou e eu vou fazer o deploy desse novo contrato dele. Gente que tá, tá, ele está nesse aqui, ele vai fazer deploy e vamos lá, vamos fazer um novo deploy desse contrato inteligente, ok? Já temos aqui o novo endereço do smart contract. Tá, vou fazer o seguinte pessoal, eu vou agora e se a gente vê aqui, dá uma olhada.

Cadê? Deixa eu ver. Vão aqui. Pode ser que mesmo se a gente ver aqui, a gente vai olhar o endereço desse contrato inteligente. Tá, 24 segundos  atrás a gente criou. Agora vamos começar a interagir, tá? Vamos interagir com esse contrato. Como é que a gente pode interagir? Bom, bom pessoal, é para a gente criar uma nova task que tá uma nova task, ou seja, que a gente pode usar a gente criar dentro do nosso hardhat config, a gente tem a possibilidade de trabalhar com algumas funções de task, então ficaria mais ou menos assim: eu adiciono aqui uma nova task. Eu vou até colocar e vou colocar dessa forma assim que acontece. Pessoal que vocês estão vendo aqui na tela, Então quando eu digitar o comando  lá no terminal eu vou adicionar o parâmetro “contract”, o parâmetro “to” e o parâmetro “amount” , ok? E passando esse esses parâmetros a gente vai poder trabalhar e interagir com o contrato inteligente, do SimpleToken que vai receber o endereço do contrato inteligentee, ele vai fazer o seu log e vai fazer o mint para o endereço com o valor do mount que a gente também vai passar para o parâmetro, tá?

Então vocês vão ver essa task funcionando na prática. Dessa forma é o comando. É mais ou menos isso aqui. O que a gente vai criar. Só que o endereço do contrato inteligente,, é esse aqui, certo? Então vamo. Vou só copiar e colar isso aqui é “to”,  tá? Ele e ele, a gente pode e eu vou pegar aqui.

Deixa eu ver, vou pegar qualquer endereço aqui, tá esse endereço mesmo que a gente tá trabalhando aqui, vou copiar esse endereço e vou colar dentro do “to” address dessa forma. E o amount eu vou colocar aqui e vou colocar 2000. Então vamos fazer um teste, vamos rodar esse comando aqui, tá? Então vou lá no terminal de novo, vou dar um clear e vou rodar esse comando para ele fazer um mint de 2000 tokens que a gente criou, então olha ele lá.

Então tá, então ele rodou quando ele estava mintando e depois ele mintou dos 2000 para esse endereço. Ok, se eu vier aqui pessoal, e pegar esse endereço desse contrato inteligente e  desse token  e vir em importar tokens, eu vou colar aqui. E aí ele trouxe o STK simple token e importou quem tá? E aí vou importar? Ele importou. Na verdade ele importou vários.

Aqui tem um, tem muito aqui, mas não tá. Vamos ver como é que está, se ele criou novos eventos aqui. Bom, ele não criou na verdade. Então, vamos pensar que ele pegou o endereço, ele anexou ao contract address. Depois ele fez um mint, certo, ele passou pelo parâmetro valor. Ué, e essa carteira que que a gente estava trabalhando a zero. 06, é. Eentão o contrato, esse para a carteira, para essa carteira eu vou abrir uma outra carteira aqui e vou pegar uma outra carteira qualquer. Tenho várias, vou criando várias aqui, então vou trabalhar em cima de uma outra que vou copiar. Essa daqui eu vou colar para gerar mintar novos tokens desse aqui e vamos dar uma olhada de novo, porque teoricamente e teoricamente ele deveria.

O que a gente pode fazer? Ele pegou ou fez um mint. A gente pode gerar um tick seek isso aqui, mas vamos lá. Hoje eu só rodar esse comando para ver que que ele vai fazer e não mudou nada não, do nada vão fazer um debug que para a gente entender o que está acontecendo. Tá, eu vou pegar esse contrato e vou lá naquele esquema do Tenderly dele e vou visualizar esse contrato inteligente novamente e ele não fez nenhuma modificação, então vou olhar mais um pouquinho.

Bom pessoal, é muito simples a gente por que não estava fazendo nada? Porque a gente estava rodando comando, mas esquecemos de um detalhe tá esquecendo, eu esqueci. Então vou rodar esse comando de novo. Aqui a gente tem que botar network, tá? O seguinte, no colar network vai, ele vai se fazer depois de uma blockchain local, entendeu? Então vou colocar aqui a network e a cadeia aqui Optmism aqui.

Vamos fazer agora o deploy novamente. Vocês vão ver que realmente a coisa funcionou. Tá lá fazendo 2000, certo? 2000 tokens e está mintando e mintou para essa carteira. Se a gente vier aqui olha lá, tá vendo, já está refletindo o mint. Mente porque eu fiz um mint antes ali para testar. Então significa que a gente está conseguindo interagir com o nosso contrato.

Se a gente for lá na carteira e vir aqui a cadeia aqui no 40, eu vou importar. Não, não é esse. É esse aqui que a gente precisa importar. Porque eu vou importar, eu vou, eu devo ter uns 4000 porque a gente fez dois testes, Vou colar aqui o endereço. Ai tá, endereço pessoal, deixa eu copiar esse contrato aqui que a gente tem que fazer, então vou lá de novo.

Pronto, agora foi a STK, importei o contrato que é o nosso token que agora tem um 4000 STK. Então é isso, tá? Fizemos a nossa primeira interação, tá? Vocês vão estar vendo esse endereço no seu github, tudo direitinho. Aliás, eu vou até excluir esse lock que tinha. Não precisava desses lá que não precisam desse aqui também.

Tá? Aí é o teste, depois eu excluo. Então a partir desse momento vocês vão poder criar e interagir com o endereço do smart contract, eu vou, eu só vou escrever aqui Network e eu vou adicionar aqui para vocês lembrarem de botar a network que vocês querem, ok? Bom, tá, já fizemos deploy, deploy do nosso contrato, já interagimos com essa contrato inteligente, já fizemos nossa primeira task para para realizar esse mint personalizado, passamos os argumentos e nas próximas aulas a gente vai dar uma avançada no nosso conteúdo de Optimism, ok?

Nos vemos na próxima aula. Muito obrigado!